# Скрипт для создания стикеров информеров в Telegram

Пример: https://tele.gs/addstickers/weather_by_aimedservicesbot

Данный скрипт показывает каким образом можно обновлять стикеры в стикерпаке.  
В первую очередь это код – пример, обЪясяняющий логику работы, алгоритма. Не стоит использовать его в продакшене.  

В данном примере при каждом выполненении скрипта в телеграм загружается новый стикер с текущим временем

#### Зависимости:
*php-imagick*  
*curl*

#### Инструкция

В файле Controller.php:

`$botKey = ""; `  
Ключ вашего телеграм бота через которого будет происходить управление стикерпаком  

`$stickerPackName = ""; `  
Имя вашего стикерпака, обратите внимание оно должно заканчиваться на _by_yourBotName    

`public $apiUrl = "";`  
Ссылка на api телеграма, по умолчанию: _https://api.telegram.org/_  

  
`public $userID = 0;`     
Ваш userID в телеграмме, получить его можно обратившись к какомму-нибудь боту который отвечает вашим юзер id ищите в поиске телеграма по ключевым словам `userid bot
`

`public $mainURL = "";`   
Адрес сайта на котором будет расположен скрипт и с которого Telegram будет забирать ваши стикеры, обратите внимание что для корректной работы Telegram требует SSL 


Что бы создать стикер пак выполните скрипт `creater.php`  
что бы обновлять выполняйте, например по крону, `скрипт updater.php`

В данном примере для рисования изображений используется библиотека ImageMagick  
Скрипт берет картинку из папки template и добавляет на нее текущее время, затем сохраняет в папку stickers и отправляет в телеграм

Дополнительно необходимо настроить команду которая будет удалять файлы из папки template спустя сутки, обратите внимание telegram не сразу забирает изображения, а затем кэширует ссылку, поэтому каждый раз мы грузим файл с уникальным названием
